<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Tango</title>
    <style>
        .a:hover{
            cursor: pointer;
            background-color: rgb(0, 128, 208);
            color: #fff;
        }
        div{
            position: absolute;
            left: 300px;
            bottom: 200px;
            background-color: #76f269;

            padding: 10px;
        }
    </style>
</head>
<body>
    <p>確定ボタンまたはエンターキーで採点</p>
    <h1 id="txt">forest</h1>
    
    <input type="text" id="kotae" value="" width="200px">
    <input type="button" value="確定" id="btn" onclick="kakutei()">
    <input type="button" value="日本語と英語を切り替え" onclick="change()">
    <input type="button" value="スキップ" onclick="skip()">
    <table border="1" style="border-collapse: collapse" width="200px">
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        <tr><td class="a">　</td></tr>
        
    </table>
    <div>
        <h1 id="ue">test</h1>
        <h1 id="sita">テスト</h1>
    </div>
    <script>
        let txt = document.getElementById("txt");
        let kotae = document.getElementById("kotae");
        let btn = document.getElementById("btn");
        let ue = document.getElementById("ue");
        let st = document.getElementById("sita");
        const en = ["ordinary","satisfy","possible","fact","resercher","believe","increase","a variety of ~","wide","apply","below","above","match","check ... out","championship","amaze","amazing","uncomfortable","well-known","costom-made","functional","stylish","opinin","support","be satisfied with","more and more"];
        const ja = ["ふつうの","まんぞくさせる","かのうな","じじつ","けんきゅうしゃ","しんじる","ふやす","さまざまなしゅるいの","はばのひろい","あてはまる","したに","うえに","しあい","をちょうさする","せんしゅけん","おどろかせる","おどろくべき","ふかいにさせる","ゆうめいな","ちゅうもんでつくった","じつようてきな","おしゃれな","いけん","をしえんする","にまんぞくする","ますます"];
        const jaFH = ["普通の","満足させる","可能な","事実","研究者","信じる","増やす","様々な種類の","幅の広い","当てはまる","下に","上に","試合","を調査する","選手権","驚かせる","驚くべき","不快にさせる","有名な","注文で作った","実用的な","おしゃれな","意見","を支援する","に満足する","ますます"];
        let kouho = Array.from(document.getElementsByClassName("a"));
        let a = "en";
        function change(){
            if(a == "en"){
                a = "ja";
            }else{
                a = "en";
            }
            console.log(a);
            tugi();
        }
        kotae.addEventListener("keyup",()=>{ //kotae.value
            if(a == "en"){
                let searched = [];
                ja.forEach((e,i) => {
                    if(e.includes(kotae.value)){
                        searched.push(jaFH[i]);
                    }
                });
                kouho.forEach((e,i) => {
            
                kouho[i].textContent = searched[i];
            
            });
            }
            
        });
            window.document.onkeydown = function(event){
                if (event.key === 'Enter') {
                    console.log("a");
                    if(kouho[1].textContent == ""){
                        console.log("b");
                        if(a =="en"){
                            console.log(ja.indexOf(kouho[0].textContent) == en.indexOf(txt.textContent));
                            if(jaFH.indexOf(kouho[0].textContent) == en.indexOf(txt.textContent)){
                                tugi();
                            }
                        }
                    }
                    if(a =="ja"){
                        if(en.indexOf(kotae.value) == jaFH.indexOf(txt.textContent)){
                            tugi();
                        }
                    }
                }
            }
            function kakutei(){
                if(kouho[1].textContent == ""){
                    console.log("b");
                    if(a =="en"){
                        console.log(ja.indexOf(kouho[0].textContent) == en.indexOf(txt.textContent));
                        if(jaFH.indexOf(kouho[0].textContent) == en.indexOf(txt.textContent)){
                            tugi();
                        }
                    }
                }
                if(a =="ja"){
                    if(en.indexOf(kotae.value) == jaFH.indexOf(txt.textContent)){
                        tugi();
                    }
                    }
            }
        kouho.forEach((e,i) => {
            kouho[i].addEventListener("click",(e)=>{
                if(a=="en"){
                    if(jaFH.indexOf(e.target.textContent) == en.indexOf(txt.textContent)){
                        tugi();
                    }
                }
            })
        });
        
        function tugi(){
            ue.textContent = txt.textContent;
            if(a == "en"){
                st.textContent = jaFH[en.indexOf(ue.textContent)];
                txt.textContent = en[Math.floor(Math.random()*en.length)];
            }
            if(a == "ja"){
                st.textContent = en[jaFH.indexOf(ue.textContent)];
                txt.textContent = jaFH[Math.floor(Math.random()*jaFH.length)];
            }
            kotae.value = "";
            kouho.forEach((e,i) => {
                kouho[i].textContent = "　"
            });
        }
        function skip(){
            tugi();
        }
        tugi();
    </script>
</body>
</html>
